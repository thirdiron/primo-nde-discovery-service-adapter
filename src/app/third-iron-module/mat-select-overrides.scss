// used in stacked-dropdown.component to override some Angular Material select styles
.dropdown-group {
  display: inline-flex;
  position: relative;

  .mat-mdc-unelevated-button:not(:disabled) {
    background-color: #fff;
    color: var(--sys-primary);
  }

  /* instead of using left/right oriented attributes, we use inline-start/inline-end
  so this works in both Left-to-Right and Right-to-Left languages */
  .ti-dropdown-button {
    white-space: nowrap;
    border-radius: 0.3125rem;
    background-color: #fff;
    border: 1px solid var(--sys-primary);
    color: var(--sys-primary);
    padding-inline-start: 1rem;
    padding-inline-end: 1rem;
    height: 32px;
    line-height: 32px;
    cursor: pointer;
    display: flex;
    align-items: center;

    .primo-pdf-icon,
    .primo-html-icon {
      height: 20px;
      width: 20px;
      margin-inline-end: var(--mat-text-button-icon-offset, -4px);
      margin-inline-start: var(--mat-text-button-icon-spacing, 8px);
      display: flex !important;
      font-size: 1.125rem;
    }

    .mdc-button__label {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      .quicklink-button-text {
        font-size: 14px;
      }
    }
  }

  /* When the first button is adjacent to a dropdown, we hide its right border to visually join them */
  stacked-button.with-dropdown .ti-dropdown-button,
  main-button.with-dropdown .ti-dropdown-button,
  custom-browzine-button.with-dropdown .ti-dropdown-button {
    /* Use logical properties so this works in both Left-to-Right and Right-to-Left languages */
    border-inline-end: none;
    border-start-start-radius: 0.3125rem;
    border-end-start-radius: 0.3125rem;
    border-start-end-radius: 0;
    border-end-end-radius: 0;

    &:focus-visible {
      border-inline-end: 2px solid black;
    }
  }

  .ti-dropdown-button:focus-visible {
    outline: 2px solid black;
    border-inline-end: 2px solid black;
    background-color: var(--mat-standard-button-toggle-selected-state-background-color);
  }

  .ti-dropdown-button:hover {
    background-color: var(--mat-standard-button-toggle-selected-state-background-color);
  }

  .ti-dropdown {
    position: relative;

    .ti-dropdown-toggle {
      border: 1px solid var(--sys-primary);
      background: #fff;
      color: var(--sys-primary);
      padding: 0 13em;
      /* Use logical properties so this works in both LTR and RTL */
      border-start-start-radius: 0;
      border-end-start-radius: 0;
      border-start-end-radius: 6px;
      border-end-end-radius: 6px;
      cursor: pointer;
      font-size: 1px;
      height: 32px;

      .mat-mdc-select-arrow {
        color: var(--sys-primary);
        transition: color 0.2s ease;
        transform: scale(0.95);
      }

      .dropdown-toggle-icon {
        --mdc-icon-button-icon-size: 0.75rem;
      }
    }

    .ti-dropdown-toggle:focus-visible {
      outline: 2px solid black;
      background-color: var(--mat-menu-item-hover-state-layer-color, rgba(0, 0, 0, 0.04));
    }

    .ti-dropdown-toggle:hover {
      background-color: var(--mat-menu-item-hover-state-layer-color, rgba(0, 0, 0, 0.04));
    }
  }
}

.cdk-overlay-container {
  div.mat-mdc-select-panel {
    min-width: 112px;
    max-width: 280px;
    overflow: auto;
    box-sizing: border-box;
    outline: 0;
    animation: _mat-menu-enter 120ms cubic-bezier(0, 0, 0.2, 1);
    border-radius: var(--mat-menu-container-shape, var(--mat-sys-corner-extra-small));
    background-color: var(--mat-menu-container-color, var(--mat-sys-surface-container));
    box-shadow: var(
      --mat-menu-container-elevation-shadow,
      0px 3px 1px -2px rgba(0, 0, 0, 0.2),
      0px 2px 2px 0px rgba(0, 0, 0, 0.14),
      0px 1px 5px 0px rgba(0, 0, 0, 0.12)
    );
    will-change: transform, opacity;

    .mat-mdc-option {
      display: flex;
      position: relative;
      align-items: center;
      justify-content: flex-start;
      overflow: hidden;
      width: 100%;
      min-height: 48px;
      margin: 0;
      padding: 0;
      padding-inline-start: var(--mat-menu-item-leading-spacing, 12px);
      padding-inline-end: var(--mat-menu-item-trailing-spacing, 12px);
      cursor: pointer;
      text-align: start;
      box-sizing: border-box;
      color: var(--sys-primary);
      font-size: 14px;
      font-weight: 500;
      background: none;
      text-decoration: none;
      -webkit-user-select: none;
      user-select: none;
      cursor: pointer;
      outline: none;
      border: none;
      -webkit-tap-highlight-color: rgba(0, 0, 0, 0);

      .ti-dropdown-option-button {
        white-space: nowrap;
        margin: 0;
        padding: 0;
        color: var(--sys-primary);
        font-size: 14px;
        font-weight: 500;
        background: none;
        text-decoration: none;
        -webkit-user-select: none;
        user-select: none;
        cursor: pointer;
        outline: none;
        border: none;
        -webkit-tap-highlight-color: rgba(0, 0, 0, 0);

        .mdc-button__label {
          display: flex;
          align-items: center;
          justify-content: center;
          gap: 8px;
          .quicklink-button-text {
            font-size: 14px;
          }
        }

        .primo-pdf-icon,
        .primo-html-icon {
          display: flex !important;
          font-size: 1.125rem;
          width: 20px;
          height: 20px;
          margin-inline-start: 0.5rem;
        }
      }
    }

    .mat-mdc-option.mdc-list-item--selected:not(.mdc-list-item--disabled):not(
        .mat-mdc-option-multiple
      ) {
      background-color: inherit;
    }

    .mat-mdc-option.mat-mdc-option-active.mdc-list-item {
      outline: none;
    }

    .mat-mdc-option:focus-visible {
      outline: 2px solid black !important;
      background-color: var(
        --mat-menu-item-hover-state-layer-color,
        rgba(0, 0, 0, 0.04)
      ) !important;
    }

    .mat-mdc-option:not([disabled]):hover {
      background-color: var(--mat-menu-item-hover-state-layer-color, rgba(0, 0, 0, 0.04));
    }

    .mat-mdc-option-active:hover {
      background-color: var(
        --mat-menu-item-hover-state-layer-color,
        rgba(0, 0, 0, 0.04)
      ) !important;
    }

    .mat-mdc-option-active:focus-visible {
      outline: 2px solid black !important;
      background-color: var(
        --mat-menu-item-hover-state-layer-color,
        rgba(0, 0, 0, 0.04)
      ) !important;
    }
  }
}
